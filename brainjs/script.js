const net = new brain.NeuralNetwork()

const data = [{"input":{"r":0,"g":0,"b":0},"output":[1]},
{"input":{"r":1,"g":1,"b":1},"output":[0]},
{"input":{"r":0.8995753100000823,"g":0.06725764083630303,"b":0.9340797776294152},"output":[0]},
{"input":{"r":0.6562720938402169,"g":0.4514472729288692,"b":0.10897907636011839},"output":[1]},
{"input":{"r":0.09756999488750173,"g":0.09320581925569194,"b":0.9582898590969269},"output":[1]},
{"input":{"r":0.8495871107749537,"g":0.013141296545412962,"b":0.4460792132047289},"output":[1]},
{"input":{"r":0.14915732631937595,"g":0.8947802414430199,"b":0.3840745247101236},"output":[0]},
{"input":{"r":0.9009222247995108,"g":0.1475765263743547,"b":0.3122460304484713},"output":[1]},
{"input":{"r":0.2297447104800907,"g":0.43770933393231193,"b":0.4157097491968613},"output":[1]},
{"input":{"r":0.8928923601976535,"g":0.2824017734753812,"b":0.3083743910213299},"output":[1]},
{"input":{"r":0.8486966937758262,"g":0.9956659569107646,"b":0.83346664299071},"output":[0]},
{"input":{"r":0.8324862712181806,"g":0.7252579601067841,"b":0.251822134829216},"output":[0]},
{"input":{"r":0.7815553181746231,"g":0.03298538926645178,"b":0.96200516360137},"output":[1]},
{"input":{"r":0.13699577616009107,"g":0.8179143686818653,"b":0.29991182625154345},"output":[0]},
{"input":{"r":0.8134802942616031,"g":0.9154925899834827,"b":0.4710055899600558},"output":[0]},
{"input":{"r":0.3598419198837812,"g":0.6191775473111123,"b":0.9048761302718005},"output":[1]},
{"input":{"r":0.6508663742434646,"g":0.9437012303035042,"b":0.28151537435773366},"output":[0]},
{"input":{"r":0.34946118339046195,"g":0.9067751137868971,"b":0.40439651479209027},"output":[0]},
{"input":{"r":0.8860160125983749,"g":0.3452441219805378,"b":0.626869333345484},"output":[0]},
{"input":{"r":0.49232477232711,"g":0.9655593826263689,"b":0.16030712434393513},"output":[0]},
{"input":{"r":0.9502734157185011,"g":0.30962331083703387,"b":0.13139076421232931},"output":[1]},
{"input":{"r":0.43377864450578874,"g":0.5337847201316774,"b":0.31792601514082053},"output":[1]},
{"input":{"r":0.8434944218800526,"g":0.27884218186711607,"b":0.5627487900737107},"output":[1]},
{"input":{"r":0.8815310256869853,"g":0.9582094573147906,"b":0.22717299255824797},"output":[0]},
{"input":{"r":0.9355176836748218,"g":0.6924381722162583,"b":0.6615425308250473},"output":[0]},
{"input":{"r":0.059576999092351146,"g":0.6440011275839821,"b":0.032501296983174166},"output":[1]},
{"input":{"r":0.9178778261214087,"g":0.14978668323613786,"b":0.22948574559555857},"output":[0]},
{"input":{"r":0.9424748335185438,"g":0.0572420085638361,"b":0.1974867346860678},"output":[1]},
{"input":{"r":0.7958824595406915,"g":0.6688698912257427,"b":0.7159863523250787},"output":[0]},
{"input":{"r":0.15356698405556846,"g":0.5114263384427173,"b":0.44162378678981185},"output":[1]},
{"input":{"r":0.5637476908508079,"g":0.19922933837963974,"b":0.3448780752237979},"output":[1]},
{"input":{"r":0.9745007242045798,"g":0.904523644013359,"b":0.7568871822248391},"output":[0]},
{"input":{"r":0.9246616116634789,"g":0.7223325472425266,"b":0.3459450066214247},"output":[0]},
{"input":{"r":0.5961399641705887,"g":0.9508491994233781,"b":0.8486024973832129},"output":[0]},
{"input":{"r":0.6905827050191757,"g":0.025647572890920456,"b":0.8886955184189447},"output":[1]},
{"input":{"r":0.9614415258113302,"g":0.8868647770307201,"b":0.968811503226936},"output":[0]},
{"input":{"r":0.7573883360776692,"g":0.9152980836530633,"b":0.595852220076456},"output":[0]},
{"input":{"r":0.3451779086691562,"g":0.4096810408899081,"b":0.9843430273480238},"output":[1]},
{"input":{"r":0.8779076876307639,"g":0.16111400094382966,"b":0.09809491811860416},"output":[1]}]

net.train(data)

const diagram = document.getElementById('diagram')
diagram.innerHTML = brain.utilities.toSVG(net)

const colorEl = document.getElementById('color')
const guessEl = document.getElementById('guess')
const whiteBtn = document.getElementById('white-btn')
const blackBtn = document.getElementById('black-btn')
const printBtn = document.getElementById('print-btn')
let color
setRandomColor()

whiteBtn.addEventListener('click', () => {
    chooseColor(1)
})

blackBtn.addEventListener('click', () => {
    chooseColor(0)
})

printBtn.addEventListener('click', print)

function chooseColor(value) {
    data.push({
        input: color,
        output: [value]
    })
    setRandomColor()
}

function print() {
    console.log(JSON.stringify(data))
    setRandomColor()
}

function setRandomColor() {
    color = {
        r: Math.random(),
        g: Math.random(),
        b: Math.random()
    }
    const guess = net.run(color)[0]
    guessEl.style.color = guess > .5 ? '#FFF' : '#000'
    colorEl.style.backgroundColor = 
      `rgba(${color.r * 255}, ${color.g * 255}, ${color.b * 255})`
}